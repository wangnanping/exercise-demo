<!doctype html>
<html>

<head>
    <style type="text/css">
        html,
        body {
            height: 100%;
            margin: 0px;
        }
    </style>
</head>

<body style="height:100%;">
    <div id="container" onclick="changeColor();" style="widht:100%; height:100%; background-color:rgb(204, 102, 0);">
        点击变色index.html也会变色
    </div>
    <script type="text/javascript">
        var container = document.getElementById('container');

        // window.addEventListener('message', function (e) {  //接收就是父窗口的‘getcolor’请求
        //     if (e.source != window.parent) return; //判断的发功消息的窗口对象 和 当前窗口的父窗口是否相同
        //     var color = container.style.backgroundColor;
        //     window.parent.postMessage(color, '*');
        // }, false);

        function changeColor() {
            var color = container.style.backgroundColor;
            if (color == 'rgb(204, 102, 0)') {
                color = 'rgb(204, 204, 0)';
            } else {
                color = 'rgb(204,102,0)';
            }
            container.style.backgroundColor = color;
            window.parent.postMessage(color, '*'); //  向父窗口传递数据 *表示传递给任意窗口
        }
    </script>
</body>

</html>